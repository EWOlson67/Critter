<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>
			Critter (Colorized)
		</title>
		<script>
			"use strict";
			
			var voCanvas1;
			var voContext1;

			var voCanvas2;
			var voContext2;

			var voCanvas3;
			var voContext3;

			var vnWidth;
			var vnHeight;

			var vnX;
			var vnY;

			var vnImages;
			var voImageXX;
			var voImageT1;
			var voImageT2;
			var voImageT3;
			var voImageT4;
			var voImageT5;
			var voImageA1;
			var voImageA2;
			var voImageH1;
			var voImageH2;
			var voImageE1;
			var voImageE2;
			var voImageE3;
			var voImageE4;
			var voImageE5;
			var voImageE6;
			var voImageE7;
			var voImageM1;
			var voImageM2;
			var voImageM3;
			var voImageM4;
			var voImageM5;
			var voImageF1;
			var voImageF2;
			var vnMagnification = 8;
			var vnRandom1;
			var vnRandom2;
			var vnRandom3;
			var vnCounter;
			var vnCounterMax;
			var vnCounterDirection;
			var vnDelay = 10;

			function fDrawCritter()
			{
					voContext2.clearRect(0, 0, vnWidth, vnHeight);
					voContext2.drawImage(voCanvas1, vnX, vnY, voCanvas1.width * vnMagnification, voCanvas1.height * vnMagnification);
			}

			function fZap()
			{
				vnCounter = vnCounter + 1;
				
				if (vnCounter === 1)
				{
					voContext1.clearRect(0, 6, 30, 6);
					voContext1.drawImage(voImageA2, 0,  6);
					
					voContext1.clearRect(0, 0, 30, 6);
					voContext1.drawImage(voImageT2, 0,  0);
					
					voContext3.clearRect(0, 0, 16, 2);
					vnRandom1 = Math.floor(Math.random() * 3) + 1;
					for (var Count = 0; Count < 15; Count = Count + 2)
					{
						if (vnRandom1 === 1)
						{
							voContext3.fillRect(Count + 0, 0, 1, 2);
						}
						if (vnRandom1 === 2)
						{
							voContext3.fillRect(Count + 1, 0, 1, 2);
						}
						if (vnRandom1 === 3)
						{
							voContext3.fillRect(Count + 0, 0, 1, 2);
							voContext3.fillRect(Count + 1, 0, 1, 2);
						}
					}
					setTimeout(fZap, 100 * vnDelay);
				}
				
				if (vnCounter === 2)
				{
					voContext1.clearRect(0, 0, 30, 6);
					voContext1.drawImage(voImageT3, 0,  0);
					setTimeout(fZap, 100 * vnDelay);
				}

				if (vnCounter === 3)
				{
					voContext1.clearRect(0, 0, 30, 6);
					voContext1.drawImage(voImageT4, 0,  0);
					setTimeout(fZap, 100 * vnDelay);
				}

				if (vnCounter === 4)
				{
					setTimeout(fZap, vnDelay);
				}
				
				if (vnCounter >= 5 && vnCounter <= 12)
				{
					var vnCount = vnCounter - 4;
					voContext1.drawImage(voCanvas3, 0, 0, vnCount * 2, 2, 6, 0, vnCount * 2, 2);
					setTimeout(fZap, vnDelay);
				}
				
				if (vnCounter === 13)
				{
					voContext1.clearRect(6, 0, 16, 2);
					setTimeout(fZap, vnDelay);
				}
				
				if (vnCounter >= 14 && vnCounter <= 21)
				{
					var vnCount = vnCounter - 13;
					voContext1.drawImage(voCanvas3, 16 - vnCount * 2, 0, vnCount * 2, 2, 6 + 16 - vnCount * 2, 0, vnCount * 2, 2);
					setTimeout(fZap, vnDelay);
				}

				if (vnCounter === 22)
				{
					voContext1.clearRect(6, 0, 16, 2);
					setTimeout(fZap, vnDelay);
				}
				
				if (vnCounter >= 23 && vnCounter <= 30)
				{
					var vnCount = vnCounter - 22;
					voContext1.drawImage(voCanvas3, 0, 0, vnCount * 2, 2, 6, 0, vnCount * 2, 2);
					setTimeout(fZap, vnDelay);
				}
				
				if (vnCounter === 31)
				{
					voContext1.clearRect(6, 0, 16, 2);
					setTimeout(fZap, vnDelay);
				}
				
				if (vnCounter >= 32 && vnCounter <= 39)
				{
					var vnCount = vnCounter - 31;
					voContext1.drawImage(voCanvas3, 16 - vnCount * 2, 0, vnCount * 2, 2, 6 + 16 - vnCount * 2, 0, vnCount * 2, 2);
					setTimeout(fZap, vnDelay);
				}

				if (vnCounter === 40)
				{
					voContext1.clearRect(6, 0, 16, 2);
					setTimeout(fMainLoop, vnDelay);
				}
				
				fDrawCritter();
			}

			function fSmile()
			{
				vnCounter = vnCounter + vnCounterDirection;
				if (vnCounter === 0)
				{
					setTimeout(fMainLoop, 1);
				}
				if (vnCounter > vnCounterMax)
				{
					vnCounterDirection =  -1;
					setTimeout(fSmile, 60 * vnDelay);
					return;
				}
				if (vnCounter === 1)
				{
					voContext1.clearRect(0, 24, 30, 6);
					voContext1.drawImage(voImageM1, 0, 24);
					fDrawCritter();
					setTimeout(fSmile, 30 * vnDelay);
				}
				if (vnCounter === 2)
				{
					voContext1.clearRect(0, 24, 30, 6);
					voContext1.drawImage(voImageM2, 0, 24);
					fDrawCritter();
					setTimeout(fSmile, 30 * vnDelay);
				}
				if (vnCounter === 3)
				{
					voContext1.clearRect(0, 24, 30, 6);
					voContext1.drawImage(voImageM3, 0, 24);
					fDrawCritter();
					setTimeout(fSmile, 30 * vnDelay);
				}
				if (vnCounter === 4)
				{
					voContext1.clearRect(0, 24, 30, 6);
					voContext1.drawImage(voImageM4, 0, 24);
					fDrawCritter();
					setTimeout(fSmile, 30 * vnDelay);
				}
				if (vnCounter === 5)
				{
					voContext1.clearRect(0, 24, 30, 6);
					voContext1.drawImage(voImageM5, 0, 24);
					fDrawCritter();
					setTimeout(fSmile, 30 * vnDelay);
				}
			}
			
			function fBlink()
			{
				vnCounter = vnCounter + 1;
				if (vnCounter === 1)
				{
					voContext1.clearRect(0, 18, 30, 6);
					voContext1.drawImage(voImageE1, 0,  18);
					fDrawCritter();
					setTimeout(fBlink, 40 * vnDelay);
				}
				if (vnCounter === 2)
				{
					voContext1.clearRect(0, 12, 30, 6);
					voContext1.drawImage(voImageH2, 0,  12);
					fDrawCritter();
					setTimeout(fBlink, 40 * vnDelay);
				}
				if (vnCounter === 3)
				{
					voContext1.clearRect(0, 18, 30, 6);
					voContext1.drawImage(voImageE6, 0,  18);
					fDrawCritter();
					setTimeout(fBlink, 40 * vnDelay);
				}
				if (vnCounter === 4)
				{
					voContext1.clearRect(0, 18, 30, 6);
					voContext1.drawImage(voImageE7, 0,  18);
					fDrawCritter();
					setTimeout(fBlink, 40 * vnDelay);
				}
				if (vnCounter === 5)
				{
					setTimeout(fBlink, 40 * vnDelay);
				}
				if (vnCounter === 6)
				{
					voContext1.clearRect(0, 18, 30, 6);
					voContext1.drawImage(voImageE6, 0,  18);
					fDrawCritter();
					setTimeout(fBlink, 40 * vnDelay);
				}
				if (vnCounter === 7)
				{
					voContext1.clearRect(0, 18, 30, 6);
					voContext1.drawImage(voImageE1, 0,  18);
					fDrawCritter();
					setTimeout(fBlink, 40 * vnDelay);
				}
				if (vnCounter === 8)
				{
					voContext1.clearRect(0, 12, 30, 6);
					voContext1.drawImage(voImageH1, 0,  12);
					fDrawCritter();
					setTimeout(fMainLoop, 1);
				}
			}
			
			function fMainLoop()
			{
				vnRandom1 = Math.floor(Math.random() * 11) + 1;
				if (vnRandom1 > 1)
				{
					vnRandom2 = Math.floor(Math.random() * 4) + 1;
					if (vnRandom2 === 1)
					{
						vnRandom3 = Math.floor(Math.random() * 4) + 1;
						if (vnRandom3 === 1)
						{
							voContext1.clearRect(0, 0, 30, 6);
							voContext1.drawImage(voImageT1, 0, 0);
						}
						if (vnRandom3 === 2)
						{
							voContext1.clearRect(0, 0, 30, 6);
							voContext1.drawImage(voImageT2, 0,  0);
						}
						if (vnRandom3 === 3)
						{
							voContext1.clearRect(0, 0, 30, 6);
							voContext1.drawImage(voImageT3, 0,  0);
						}
						if (vnRandom3 === 4)
						{
							voContext1.clearRect(0, 0, 30, 6);
							voContext1.drawImage(voImageT4, 0,  0);
						}
						if (vnRandom3 === 1)
						{
							voContext1.clearRect(0, 6, 30, 6);
							voContext1.drawImage(voImageA1, 0,  6);
						}
						else
						{
							voContext1.clearRect(0, 6, 30, 6);
							voContext1.drawImage(voImageA2, 0,  6);
						}
					}
					if (vnRandom2 === 2  || vnRandom2 === 3)
					{
						vnRandom3 = Math.floor(Math.random() * 5) + 1;
						if (vnRandom3 === 1)
						{
							voContext1.clearRect(0, 18, 30, 6);
							voContext1.drawImage(voImageE1, 0,  18);
						}
						if (vnRandom3 === 2)
						{
							voContext1.clearRect(0, 18, 30, 6);
							voContext1.drawImage(voImageE2, 0,  18);
						}
						if (vnRandom3 === 3)
						{
							voContext1.clearRect(0, 18, 30, 6);
							voContext1.drawImage(voImageE3, 0,  18);
						}
						if (vnRandom3 === 4)
						{
							voContext1.clearRect(0, 18, 30, 6);
							voContext1.drawImage(voImageE4, 0,  18);
						}
						if (vnRandom3 === 5)
						{
							voContext1.clearRect(0, 18, 30, 6);
							voContext1.drawImage(voImageE5, 0,  18);
						}
					}
					if (vnRandom2 === 4)
					{
						vnRandom3 = Math.floor(Math.random() * 2) + 1;
						if (vnRandom3 === 1)
						{
							voContext1.clearRect(0, 30, 30, 6);
							voContext1.drawImage(voImageF1, 0,  30);
						}
						if (vnRandom3 === 2)
						{
							voContext1.clearRect(0, 30, 30, 6);
							voContext1.drawImage(voImageF2, 0,  30);
						}
					}
					fDrawCritter();
					setTimeout(fMainLoop, 60 * vnDelay);
				}
				else
				{
					vnRandom2 = Math.floor(Math.random() * 3) + 1;
					if (vnRandom2 === 1)
					{
						// 580 ' ZAP
						vnCounter = 0;
						setTimeout(fZap, 1);
						//setTimeout(fMainLoop, 20 * vnDelay);
					}
					if (vnRandom2 === 2)
					{
						// 670 ' SMILE
						vnCounter = 0;
						vnCounterMax = Math.floor(Math.random() * 4) + 2;
						vnCounterDirection = 1;
						setTimeout(fSmile, 1);
					}
					if (vnRandom2 === 3)
					{
						// 730 ' BLINK
						vnCounter = 0;
						setTimeout(fBlink, 40 * vnDelay);
					}
				}
			}
			
			function fOnLoad()
			{
				voCanvas1 = document.createElement("canvas");
				voCanvas1.width = 30;
				voCanvas1.height = 36;
				voContext1 = voCanvas1.getContext("2d");

				voCanvas3 = document.createElement("canvas");
				voCanvas3.width = 16;
				voCanvas3.height = 2;
				voContext3 = voCanvas3.getContext("2d");
				voContext3.fillStyle = "white";

				voCanvas2 = document.createElement("canvas");
				voCanvas2.style.position = "absolute";
				voCanvas2.style.left = "0";
				voCanvas2.style.top = "0";

				vnWidth = window.innerWidth;
				vnHeight = window.innerHeight;

				voCanvas2.width = vnWidth;
				voCanvas2.height = vnHeight;
				
				if (Math.floor(voCanvas2.width / voCanvas1.width) > Math.floor(voCanvas2.height / voCanvas1.height))
				{
					vnMagnification = Math.floor(voCanvas2.height / voCanvas1.height) - 1;
				}
				else
				{
					vnMagnification = Math.floor(voCanvas2.width / voCanvas1.width) - 1;
				}
			
				document.body.appendChild(voCanvas2);
				
				voContext2 = voCanvas2.getContext("2d");

				voContext2.imageSmoothingEnabled = false;
				voContext2.mozImageSmoothingEnabled = false;
				voContext2.webkitImageSmoothingEnabled = false;

				vnX = (vnWidth - voCanvas1.width * vnMagnification) / 2;
				vnY = (vnHeight - voCanvas1.height * vnMagnification) / 2;

				vnImages = 0;

				voImageXX = new Image();
				voImageXX.addEventListener("load", fImageLoaded);
				voImageXX.src = "XX.png";

				voImageT1 = new Image();
				voImageT1.addEventListener("load", fImageLoaded);
				voImageT1.src = "T1.png";

				voImageT2 = new Image();
				voImageT2.addEventListener("load", fImageLoaded);
				voImageT2.src = "T2.png";

				voImageT3 = new Image();
				voImageT3.addEventListener("load", fImageLoaded);
				voImageT3.src = "T3.png";

				voImageT4 = new Image();
				voImageT4.addEventListener("load", fImageLoaded);
				voImageT4.src = "T4.png";

				voImageT5 = new Image();
				voImageT5.addEventListener("load", fImageLoaded);
				voImageT5.src = "T5.png";

				voImageA1 = new Image();
				voImageA1.addEventListener("load", fImageLoaded);
				voImageA1.src = "A1.png";

				voImageA2 = new Image();
				voImageA2.addEventListener("load", fImageLoaded);
				voImageA2.src = "A2.png";

				voImageH1 = new Image();
				voImageH1.addEventListener("load", fImageLoaded);
				voImageH1.src = "H1.png";

				voImageH2 = new Image();
				voImageH2.addEventListener("load", fImageLoaded);
				voImageH2.src = "H2.png";

				voImageE1 = new Image();
				voImageE1.addEventListener("load", fImageLoaded);
				voImageE1.src = "E1.png";

				voImageE2 = new Image();
				voImageE2.addEventListener("load", fImageLoaded);
				voImageE2.src = "E2.png";

				voImageE3 = new Image();
				voImageE3.addEventListener("load", fImageLoaded);
				voImageE3.src = "E3.png";

				voImageE4 = new Image();
				voImageE4.addEventListener("load", fImageLoaded);
				voImageE4.src = "E4.png";

				voImageE5 = new Image();
				voImageE5.addEventListener("load", fImageLoaded);
				voImageE5.src = "E5.png";

				voImageE6 = new Image();
				voImageE6.addEventListener("load", fImageLoaded);
				voImageE6.src = "E6.png";

				voImageE7 = new Image();
				voImageE7.addEventListener("load", fImageLoaded);
				voImageE7.src = "E7.png";

				voImageM1 = new Image();
				voImageM1.addEventListener("load", fImageLoaded);
				voImageM1.src = "M1.png";

				voImageM2 = new Image();
				voImageM2.addEventListener("load", fImageLoaded);
				voImageM2.src = "M2.png";

				voImageM3 = new Image();
				voImageM3.addEventListener("load", fImageLoaded);
				voImageM3.src = "M3.png";

				voImageM4 = new Image();
				voImageM4.addEventListener("load", fImageLoaded);
				voImageM4.src = "M4.png";

				voImageM5 = new Image();
				voImageM5.addEventListener("load", fImageLoaded);
				voImageM5.src = "M5.png";

				voImageF1 = new Image();
				voImageF1.addEventListener("load", fImageLoaded);
				voImageF1.src = "F1.png";

				voImageF2 = new Image();
				voImageF2.addEventListener("load", fImageLoaded);
				voImageF2.src = "F2.png";
			}

			function fOnResize()
			{
				vnWidth = window.innerWidth;
				vnHeight = window.innerHeight;

				voCanvas2.width = vnWidth;
				voCanvas2.height = vnHeight;

				if (Math.floor(voCanvas2.width / voCanvas1.width) > Math.floor(voCanvas2.height / voCanvas1.height))
				{
					vnMagnification = Math.floor(voCanvas2.height / voCanvas1.height) - 1;
				}
				else
				{
					vnMagnification = Math.floor(voCanvas2.width / voCanvas1.width) - 1;
				}

				vnX = (vnWidth - voCanvas1.width * vnMagnification) / 2;
				vnY = (vnHeight - voCanvas1.height * vnMagnification) / 2;

				if (voContext2)
				{
					voContext2.imageSmoothingEnabled = false;
					voContext2.mozImageSmoothingEnabled = false;
					voContext2.webkitImageSmoothingEnabled = false;
					
					fDrawCritter();
				}
			}

			function fImageLoaded()
			{
				vnImages = vnImages + 1;
				if (vnImages === 24)
				{
					voContext1.drawImage(voImageXX, 0, 0);
					fDrawCritter();
					setTimeout(fMainLoop, 1);
				}
			}
		</script>
	</head>
	<body onload="fOnLoad()" onresize="fOnResize()" style="background:black">
	</body>
</html>
